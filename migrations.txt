# Generated by Django 3.2.25 on 2025-04-17 23:47

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Country',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('code', models.CharField(max_length=3)),
            ],
        ),
        migrations.CreateModel(
            name='EnergyData',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('year', models.IntegerField()),
                ('renewable_pct', models.FloatField()),
                ('country', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='energy.country')),
            ],
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-18 14:00

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0001_initial'),
    ]

    operations = [
        migrations.AddField(
            model_name='country',
            name='income_group',
            field=models.CharField(max_length=30, null=True),
        ),
        migrations.AddField(
            model_name='country',
            name='region',
            field=models.CharField(max_length=20, null=True),
        ),
        migrations.AddField(
            model_name='country',
            name='type',
            field=models.CharField(max_length=10, null=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='code',
            field=models.CharField(max_length=4, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='name',
            field=models.CharField(max_length=50, unique=True),
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-18 20:13

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0002_auto_20250418_1400'),
    ]

    operations = [
        migrations.RenameField(
            model_name='energydata',
            old_name='renewable_pct',
            new_name='renewable_share',
        ),
        migrations.AddField(
            model_name='country',
            name='renewable_share',
            field=models.FloatField(default=0.0),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='country',
            name='code',
            field=models.CharField(blank=True, max_length=4, null=True, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='income_group',
            field=models.CharField(default='Unknown', max_length=30),
        ),
        migrations.AlterField(
            model_name='country',
            name='name',
            field=models.CharField(max_length=100, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='region',
            field=models.CharField(default='Unknown', max_length=50),
        ),
        migrations.AlterField(
            model_name='country',
            name='type',
            field=models.CharField(default='Unknown', max_length=10),
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-21 12:56

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0003_auto_20250418_2013'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='country',
            options={'ordering': ['name']},
        ),
        migrations.AlterModelOptions(
            name='energydata',
            options={'ordering': ['year']},
        ),
        migrations.AlterField(
            model_name='country',
            name='renewable_share',
            field=models.FloatField(help_text='Renewable energy share in 2015 (%)'),
        ),
        migrations.AlterUniqueTogether(
            name='energydata',
            unique_together={('country', 'year')},
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-22 19:08

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0004_auto_20250421_1256'),
    ]

    operations = [
        migrations.AlterField(
            model_name='country',
            name='income_group',
            field=models.CharField(blank=True, choices=[('high', 'High income'), ('low', 'Low income'), ('lower_middle', 'Lower middle income'), ('upper_middle', 'Upper middle income')], max_length=20, null=True),
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-21 18:08

import django.core.validators
from django.db import migrations, models
import django.db.models.deletion

def transfer_data(apps, schema_editor):
    Country = apps.get_model('energy', 'Country')
    EnergyData = apps.get_model('energy', 'EnergyData')
    
    for country in Country.objects.exclude(renewable_share__isnull=True):
        EnergyData.objects.create(
            country=country,
            year=2015, 
            renewable_share=country.renewable_share
        )

class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0004_auto_20250421_1256'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='country',
            options={'ordering': ['name'], 'verbose_name': 'Country', 'verbose_name_plural': 'Countries'},
        ),
        migrations.AlterModelOptions(
            name='energydata',
            options={'get_latest_by': 'year', 'ordering': ['-year'], 'verbose_name': 'Energy Data', 'verbose_name_plural': 'Energy Dataset'},
        ),
        migrations.RunPython(transfer_data),
        migrations.RemoveField(
            model_name='country',
            name='renewable_share',
        ),
        migrations.RemoveField(
            model_name='country',
            name='type',
        ),
        migrations.AddField(
            model_name='energydata',
            name='fossil_share',
            field=models.FloatField(blank=True, null=True, validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Fossil Fuel Share (%)'),
        ),
        migrations.AlterField(
            model_name='country',
            name='code',
            field=models.CharField(blank=True, max_length=4, null=True, unique=True, verbose_name='Country Code'),
        ),
        migrations.AlterField(
            model_name='country',
            name='income_group',
            field=models.CharField(choices=[('L', 'Low income'), ('LM', 'Lower middle income'), ('UM', 'Upper middle income'), ('H', 'High income')], default='Unknown', max_length=30, verbose_name='Income Group'),
        ),
        migrations.AlterField(
            model_name='country',
            name='name',
            field=models.CharField(max_length=100, unique=True, verbose_name='Country Name'),
        ),
        migrations.AlterField(
            model_name='country',
            name='region',
            field=models.CharField(default='Unknown', max_length=50, verbose_name='Region'),
        ),
        migrations.AlterField(
            model_name='energydata',
            name='country',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='energy.country', verbose_name='Related Country'),
        ),
        migrations.AlterField(
            model_name='energydata',
            name='renewable_share',
            field=models.FloatField(validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Renewable Energy Share (%)'),
        ),
        migrations.AlterField(
            model_name='energydata',
            name='year',
            field=models.IntegerField(validators=[django.core.validators.MinValueValidator(2005), django.core.validators.MaxValueValidator(2020)], verbose_name='Year'),
        ),
        migrations.AddIndex(
            model_name='country',
            index=models.Index(fields=['region'], name='energy_coun_region_e5d8c6_idx'),
        ),
        migrations.AddIndex(
            model_name='country',
            index=models.Index(fields=['income_group'], name='energy_coun_income__9be668_idx'),
        ),
    ]# Generated by Django 3.2.25 on 2025-04-22 20:12

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0005_alter_country_income_group'),
    ]

    operations = [
        migrations.AlterField(
            model_name='country',
            name='income_group',
            field=models.CharField(blank=True, choices=[('High income', 'High income'), ('Low income', 'Low income'), ('Lower middle', 'Lower middle income'), ('Upper middle', 'Upper middle income')], max_length=20, null=True),
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-21 22:17

import django.core.validators
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0005_auto_20250421_1808'),
    ]

    operations = [
        migrations.AlterField(
            model_name='energydata',
            name='year',
            field=models.IntegerField(validators=[django.core.validators.MinValueValidator(1985), django.core.validators.MaxValueValidator(2020)], verbose_name='Year'),
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-22 15:09

from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0006_alter_energydata_year'),
    ]

    operations = [
        migrations.AddField(
            model_name='country',
            name='type',
            field=models.CharField(default='country', max_length=10, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='code',
            field=models.CharField(default='UNKOWN', max_length=10, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='income_group',
            field=models.CharField(blank=True, max_length=50, null=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='name',
            field=models.CharField(max_length=100, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='region',
            field=models.CharField(blank=True, max_length=100, null=True),
        ),
    ]
# Generated by Django 3.2.25 on 2025-04-22 22:27

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0006_alter_country_income_group'),
        ('energy', '0007_auto_20250422_1509'),
    ]

    operations = [
    ]
# Generated by Django 3.2.25 on 2025-04-22 22:35

from django.db import migrations, models
import django.db.models.deletion


class Migration(migrations.Migration):

    dependencies = [
        ('energy', '0008_merge_20250422_2227'),
    ]

    operations = [
        migrations.AlterModelOptions(
            name='country',
            options={'ordering': ['name']},
        ),
        migrations.AlterModelOptions(
            name='energydata',
            options={'ordering': ['year']},
        ),
        migrations.RemoveIndex(
            model_name='country',
            name='energy_coun_region_e5d8c6_idx',
        ),
        migrations.RemoveIndex(
            model_name='country',
            name='energy_coun_income__9be668_idx',
        ),
        migrations.RemoveField(
            model_name='energydata',
            name='fossil_share',
        ),
        migrations.AddField(
            model_name='country',
            name='renewable_share',
            field=models.FloatField(default=0.0, help_text='Renewable energy share in 2015 (%)'),
            preserve_default=False,
        ),
        migrations.AlterField(
            model_name='country',
            name='code',
            field=models.CharField(blank=True, max_length=4, null=True, unique=True),
        ),
        migrations.AlterField(
            model_name='country',
            name='region',
            field=models.CharField(default='Unknown', max_length=50),
        ),
        migrations.AlterField(
            model_name='country',
            name='type',
            field=models.CharField(default='Unknown', max_length=10),
        ),
        migrations.AlterField(
            model_name='energydata',
            name='country',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='energy.country'),
        ),
        migrations.AlterField(
            model_name='energydata',
            name='renewable_share',
            field=models.FloatField(),
        ),
        migrations.AlterField(
            model_name='energydata',
            name='year',
            field=models.IntegerField(),
        ),
    ]
